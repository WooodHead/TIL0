# 1106

## 일반 함수와 화살표 함수의 this

```javascript
const shape = {
  radius: 10,
  diameter() {
    return this.radius * 2;
  },
  arrowDiameter: () => {
    return this.radius * 2;
  },
};

console.log(shape.diameter());
// 20
console.log(shape.arrowDiameter());
// NaN

const diameter = shape.diameter;
const arrowDiameter = shape.arrowDiameter;

console.log(diameter());
// NaN
console.log(arrowDiameter());
// NaN
```

```javascript
function Shape() {
  this.radius = 10;
  this.diameter = function () {
    return this.radius * 2;
  };
  this.arrowDiameter = () => {
    return this.radius * 2;
  };
}

const shape = new Shape();

console.log(shape.diameter());
// 20
console.log(shape.arrowDiameter());
// 20

const diameter = shape.diameter;
const arrowDiameter = shape.arrowDiameter;

console.log(diameter());
// NaN
console.log(arrowDiameter());
// 20
```

## 생성자 함수(constructor)와 프로토타입(prototype)

```javascript
function Person(name, age) {
  this.name = name;
  this.age = age;
}

// Person.prototype = { constructor: function Person(...) { ... } }
// Person.prototype.constructor = function Person(...) { ... }

const foo = new Person('foo', 30);
// foo: Person { name: 'foo', age: 30 }
// foo.__proto__: { constructor: function Person(...) { ... } }
// foo.__proto__.constructor = function Person(...) { ... }
```

![1106-image-0](images/1106-image-0.png)

![1106-image-1](images/1106-image-1.png)

> ☝ `__proto__` 는 ECMAScript의 스펙이 아닌 일부 모던 브라우저가 구현한 것으로, `[[Prototype]]` 를 접근하는 속성이다.

```javascript
function Person(name) {
  this.name = name;
  this.getName = function () {
    return this.name;
  };
}

console.log(Person.prototype); // { constructor: function Person(name) { ... } }

function Child(name, age) {
  Person.call(this, name);
  this.age = age;
  this.getAge = function () {
    return this.age;
  };
}

console.log(Child.prototype); // { constructor: function Child(name, age) { ... } }

Child.prototype = Object.create(Person.prototype);

console.log(Object.create(Person.prototype)); // Person {}
console.log(Child.prototype); // Person {}
console.log(Child.prototype.constructor); // function Person(name) { ... }

Child.prototype.constructor = Child;

console.log(Child.prototype);
// Person { constructor: function Child(name, age) { ... } }

var child = new Child('foo', 20);

console.log(child.getName()); // 'foo'
console.log(child.getAge()); // 20
```
